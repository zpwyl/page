<!DOCTYPE html>
<html>
  <!-- Html Head Tag-->
  <head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="zp">
  <!-- Open Graph Data -->
  <meta property="og:title" content="Three.js(3D实景)"/>
  <meta property="og:description" content="" />
  <meta property="og:site_name" content="个人博客"/>
  <meta property="og:type" content="article" />
  <meta property="og:image" content="http://yoursite.com"/>
  
    <link rel="alternate" href="/atom.xml" title="个人博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/zp.github.io/img/favicon.ico">
  

  <!-- Site Title -->
  <title>个人博客</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="/zp.github.io/css/bootstrap.min.css">
  <!-- Custom CSS -->
  
  <link rel="stylesheet" href="/zp.github.io/css/style.light.css">

  <!-- Google Analytics -->
  

</head>

  <body>
    <!-- Page Header -->


<header class="site-header header-background" style="background-image: url(/zp.github.io//img/default-banner-dark.jpg)">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-title with-background-image">
          <p class="title">Three.js(3D实景)</p>
          <p class="subtitle"></p>
        </div>
        <div class="site-menu with-background-image">
          <ul>
            
              <li>
                <a href="/zp.github.io/">
                  
                  home
                  
                </a>
              </li>
            
              <li>
                <a href="/zp.github.io/archives">
                  
                  Archives
                  
                </a>
              </li>
            
              <li>
                <a href="https://github.com/zpwyl/">
                  
                  Github
                  
                </a>
              </li>
            
              <li>
                <a href="/zp.github.io/1156328482@qq.com">
                  
                  Email
                  
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>
  </div>
</header>

<article>
  <div class="container typo">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-info text-muted">
          
            <!-- Author -->
            <span class="author info">By zp</span>
          
          <!-- Date -->
          <span class="date-time info">On
            <span class="date">2019-03-07</span>
            <span class="time">02:21:46</span>
          </span>
          
          <!--  Categories  -->
            <span class="categories info">Under 

<a href="/zp.github.io/categories/js/">js</a>
</span>
          
        </div>
        <!-- Tags -->
        
          <div class="post-tags text-muted">
            Tags: 

<a class="tag" href="/zp.github.io/tags/threejs/">#threejs</a>


          </div>
        
        <!-- Post Main Content -->
        <div class="post-content">
          <p>使用Three.js实现汽车3D实景（颜色交互）<br><a id="more"></a></p>
<p>问题来源：<br>&nbsp;&nbsp;&nbsp;&nbsp;和导师交流后决定以这个来做毕业设计，于是就开始了three.js的学习，经过半个多月的基础学习，终于入门，下面来看看成果。</p>
<p>代码演示：<br>html部分<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">    &lt;title&gt;3D（颜色交互）&lt;/title&gt;</span><br><span class="line">    &lt;script src=&quot;js/jquery-3.3.1.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;three.js/build/three.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;js/OrbitControls.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    &lt;script src=&quot;three.js/examples/js/loaders/GLTFLoader.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;div id=&quot;contorl&quot;&gt;</span><br><span class="line">	&apos;&apos;&apos;这里是根据每个模型设计的不同而不同的&apos;&apos;&apos;</span><br><span class="line">    &lt;select class=&quot;select&quot;&gt;</span><br><span class="line">        &lt;option value=&quot;null&quot;&gt;请选择你要DIY的颜色：&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;0&quot;&gt;雨刷和后窗边框和后侧左标&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;1&quot;&gt;轮毂&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;2&quot;&gt;座椅靠垫背面&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;3&quot;&gt;安全带&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;4&quot;&gt;前车窗边&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;5&quot;&gt;后窗窗边&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;7&quot;&gt;车窗按键&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;9&quot;&gt;前车灯&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;10&quot;&gt;前车灯玻璃线&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;11&quot;&gt;前车灯玻璃&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;13&quot;&gt;后车灯玻璃&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;14&quot;&gt;后车灯玻璃线&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;15&quot;&gt;轮胎&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;16&quot;&gt;底盘&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;17&quot;&gt;轮毂内&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;18&quot;&gt;后视镜加前车窗边&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;19&quot;&gt;车顶和车尾的主色&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;20&quot;&gt;前格栅外框后两侧车标&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;23&quot;&gt;座椅靠垫背面&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;25&quot;&gt;前车门&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;26&quot;&gt;整体颜色&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;27&quot;&gt;车位上部和车窗尾部&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;28&quot;&gt;驾驶座前面和右侧&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;29&quot;&gt;方向盘&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;33&quot;&gt;车标颜色&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;34&quot;&gt;格栅内边框、车标边框、车尾车灯下和车中下&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;44&quot;&gt;车前下&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;input class=&quot;color&quot; type=&quot;color&quot;&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script src=&quot;js/model.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<p>model.css<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">body &#123;</span><br><span class="line">    margin: 0 ;</span><br><span class="line">	padding: 0 ;</span><br><span class="line">    overflow: hidden;</span><br><span class="line">&#125;</span><br><span class="line">#contorl&#123;</span><br><span class="line">    position: absolute;</span><br><span class="line">    width: 15%;</span><br><span class="line">    height: 20%;</span><br><span class="line">    right: 20px;</span><br><span class="line">    top: 20px;</span><br><span class="line">    background-color: white;</span><br><span class="line">&#125;</span><br><span class="line">.select&#123;</span><br><span class="line">    font-family: &quot;微软雅黑&quot;;</span><br><span class="line">    background: rgba(0,0,0,0);</span><br><span class="line">    width: 70%;</span><br><span class="line">    height: 30%;</span><br><span class="line">    font-size: 12px;</span><br><span class="line">    color: black;</span><br><span class="line">    text-align: center;</span><br><span class="line">    border: 1px #1a1a1a solid;</span><br><span class="line">    border-radius: 5px;</span><br><span class="line">&#125;</span><br><span class="line">.select &gt; option&#123;</span><br><span class="line">    color: black;</span><br><span class="line">    background: #fff;</span><br><span class="line">    line-height: 20px;</span><br><span class="line">&#125;</span><br><span class="line">.select:focus&#123;</span><br><span class="line">    border: 2px #0000ff solid;</span><br><span class="line">    box-shadow: 0 0 15px 1px #DDDDDD;</span><br><span class="line">&#125;</span><br><span class="line">.select &gt; option:hover&#123;</span><br><span class="line">    background: #EBCCD1;</span><br><span class="line">&#125;</span><br><span class="line">.color&#123;</span><br><span class="line">    border: none;</span><br><span class="line">    outline: none;</span><br><span class="line">&#125;</span><br><span class="line">::-webkit-color-swatch-wrapper&#123;background-color:#ffffff;&#125;</span><br><span class="line">::-webkit-color-swatch&#123;position: relative;&#125;</span><br></pre></td></tr></table></figure></p>
<p>model.js(此处才是重点)<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br></pre></td><td class="code"><pre><span class="line">let scene, camera, renderer, controls, guiControls;</span><br><span class="line"></span><br><span class="line">/*场景 */</span><br><span class="line">function initScene() &#123;</span><br><span class="line">    scene = new THREE.Scene();</span><br><span class="line">    var skySphereGeometry = new THREE.SphereGeometry( 500, 30, 100 );</span><br><span class="line">    var texture = new THREE.TextureLoader().load(&quot;images/timg.jpg&quot;);</span><br><span class="line">    var skySphereMaterial = new THREE.MeshBasicMaterial( &#123; map:texture, side: THREE.DoubleSide &#125; );</span><br><span class="line">    var skySphere = new THREE.Mesh( skySphereGeometry, skySphereMaterial );</span><br><span class="line">    scene.add(skySphere);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 相机 */</span><br><span class="line">function initCamera() &#123;</span><br><span class="line">    camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 10000);</span><br><span class="line">    camera.position.set(70, 50, 100);</span><br><span class="line">    camera.lookAt(new THREE.Vector3(0, 0, 0));</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 渲染器 */</span><br><span class="line">function initRender() &#123;</span><br><span class="line">    renderer = new THREE.WebGLRenderer(&#123;antialias: true&#125;);</span><br><span class="line">    renderer.setSize(window.innerWidth, window.innerHeight);</span><br><span class="line">    renderer.setClearColor(0xffffff);</span><br><span class="line">    renderer.shadowMap.enabled = true;</span><br><span class="line">    document.body.appendChild(renderer.domElement);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 灯光 */</span><br><span class="line">function initLight() &#123;</span><br><span class="line">	//坐标系（前期可以添加，最后请删除）</span><br><span class="line">    //var axes = new THREE.AxesHelper(20);</span><br><span class="line">    //scene.add(axes);</span><br><span class="line">	//添加水平面</span><br><span class="line">    //var planeGeometry = new THREE.PlaneGeometry(200,200,100,1);</span><br><span class="line">    //var texture = new THREE.TextureLoader().load(&quot;images/5.png&quot;);</span><br><span class="line">    //var planeMaterial = new THREE.MeshLambertMaterial(&#123;map:texture&#125;);</span><br><span class="line">    //var plane = new THREE.Mesh(planeGeometry, planeMaterial);</span><br><span class="line">    //plane.rotation.x = -0.5*Math.PI;</span><br><span class="line">    //plane.name =&apos;plane&apos;;</span><br><span class="line">    //plane.position.set(0,0,0);</span><br><span class="line">    //plane.receiveShadow = true;</span><br><span class="line">    //scene.add(plane);</span><br><span class="line">	</span><br><span class="line">	// 添加自然光</span><br><span class="line">    var ambiColor = &quot;#ffffff&quot;;</span><br><span class="line">    var ambientLight = new THREE.AmbientLight(ambiColor);</span><br><span class="line">    scene.add(ambientLight);</span><br><span class="line">	// 添加点光源</span><br><span class="line">    var pointColor = &quot;#ffffff&quot;;</span><br><span class="line">    var directionalLight = new THREE.DirectionalLight(pointColor);</span><br><span class="line">    directionalLight.position.set(-50, 60, 200);</span><br><span class="line">    directionalLight.castShadow = true;</span><br><span class="line">    directionalLight.shadow.camera.near = 20;</span><br><span class="line">    directionalLight.shadow.camera.far = 200;</span><br><span class="line">    directionalLight.shadow.camera.left = -50;</span><br><span class="line">    directionalLight.shadow.camera.right = 50;</span><br><span class="line">    directionalLight.shadow.camera.top = 50;</span><br><span class="line">    directionalLight.shadow.camera.bottom = -50;</span><br><span class="line">    directionalLight.distance = 0;</span><br><span class="line">    directionalLight.intensity = 5;</span><br><span class="line">    directionalLight.shadow.mapSize.height = 1024;</span><br><span class="line">    directionalLight.shadow.mapSize.width = 1024;</span><br><span class="line">    scene.add(directionalLight);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 控制器 */</span><br><span class="line">function initControls() &#123;</span><br><span class="line">    controls = new THREE.OrbitControls(camera, renderer.domElement);</span><br><span class="line">	// 如果使用animate方法时，将此函数删除</span><br><span class="line">	//controls.addEventListener( &apos;change&apos;, render );</span><br><span class="line">	// 使动画循环使用时阻尼或自转 意思是否有惯性</span><br><span class="line">	controls.enableDamping = true;</span><br><span class="line">	//动态阻尼系数 就是鼠标拖拽旋转灵敏度</span><br><span class="line">	controls.dampingFactor = 0.95;</span><br><span class="line">	//是否可以缩放</span><br><span class="line">	controls.enableZoom = true;</span><br><span class="line">	//是否自动旋转</span><br><span class="line">	// controls.autoRotate = true;</span><br><span class="line">	//设置相机距离原点的最远距离</span><br><span class="line">	controls.minDistance = 70;</span><br><span class="line">	//设置相机距离原点的最远距离</span><br><span class="line">	controls.maxDistance = 250;</span><br><span class="line">	//是否开启右键拖拽</span><br><span class="line">	controls.enablePan = false;</span><br><span class="line">	//设置聚焦坐标</span><br><span class="line">	// controls.target = new THREE.Vector3()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 场景中的内容 */</span><br><span class="line">function initContent() &#123;</span><br><span class="line">    // 加载 glTF 格式的模型</span><br><span class="line">    let loader = new THREE.GLTFLoader();/*实例化加载器*/</span><br><span class="line">    loader.load(&apos;./example/11/scene.gltf&apos;,function (obj) &#123;</span><br><span class="line">        obj.scene.name = &apos;zp&apos;;</span><br><span class="line">		var car = obj.scene;</span><br><span class="line">		console.log(car.children[0].children[0].children[0].children[0]);</span><br><span class="line">        scene.add(car);</span><br><span class="line">    &#125;,function (xhr) &#123;</span><br><span class="line">        console.log( ( xhr.loaded / xhr.total * 100 ) + &apos;% loaded&apos; );</span><br><span class="line">    &#125;,function (error) &#123;</span><br><span class="line">		console.log(error)</span><br><span class="line">        // console.log(&apos;load error!&apos;+error.getWebGLErrorMessage());</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 性能插件 */</span><br><span class="line">function initStats() &#123;</span><br><span class="line"></span><br><span class="line">    let stats = new Stats();</span><br><span class="line"></span><br><span class="line">    document.body.appendChild(stats.domElement);</span><br><span class="line"></span><br><span class="line">    return stats;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 窗口变动触发 */</span><br><span class="line">function onWindowResize() &#123;</span><br><span class="line"></span><br><span class="line">    camera.aspect = window.innerWidth / window.innerHeight;</span><br><span class="line">    camera.updateProjectionMatrix();</span><br><span class="line">    renderer.setSize(window.innerWidth, window.innerHeight);</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 数据更新 */</span><br><span class="line">function update() &#123;</span><br><span class="line"></span><br><span class="line">    // stats.update();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 初始化 */</span><br><span class="line">function init() &#123;</span><br><span class="line">    initScene();</span><br><span class="line">    initCamera();</span><br><span class="line">    initRender();</span><br><span class="line">    initLight();</span><br><span class="line">    initControls();</span><br><span class="line">    initContent();</span><br><span class="line">    initGui();</span><br><span class="line">    /* 监听事件 */</span><br><span class="line">    window.addEventListener(&apos;resize&apos;, onWindowResize, false);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 循环渲染 */</span><br><span class="line">function animate() &#123;</span><br><span class="line">    requestAnimationFrame(animate);</span><br><span class="line">    renderer.render(scene, camera);</span><br><span class="line">    update();</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 初始加载 */</span><br><span class="line">(function () &#123;</span><br><span class="line">    console.log(&quot;three init start...&quot;);</span><br><span class="line"></span><br><span class="line">    init();</span><br><span class="line">    animate();</span><br><span class="line"></span><br><span class="line">    console.log(&quot;three init send...&quot;);</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line">// 颜色交互</span><br><span class="line">var select = document.getElementsByClassName(&apos;select&apos;)[0];</span><br><span class="line">var color = document.getElementsByClassName(&apos;color&apos;)[0];</span><br><span class="line">select.onchange = function()&#123;</span><br><span class="line">    var attr = document.getElementsByClassName(&apos;select&apos;)[0].value;</span><br><span class="line">    if(attr !== &apos;null&apos;)&#123;</span><br><span class="line">        console.log(color);</span><br><span class="line">        var colors = scene.getObjectByName(&apos;zp&apos;).children[0].children[0].children[0].children[0].children[parseInt(attr)].material.color;</span><br><span class="line">        color.value = rgb_hex(colors.r, colors.g, colors.b);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">color.onchange = function(e)&#123;</span><br><span class="line">    var attr = document.getElementsByClassName(&apos;select&apos;)[0].value;</span><br><span class="line">    if(attr !== &apos;null&apos;)&#123;</span><br><span class="line">        var colors = scene.getObjectByName(&apos;zp&apos;).children[0].children[0].children[0].children[0].children[parseInt(attr)].material.color;</span><br><span class="line">        var hex = document.getElementsByClassName(&apos;color&apos;)[0].value;</span><br><span class="line">        var c = hex_rgb(hex);</span><br><span class="line">        colors.r = c[0];</span><br><span class="line">        colors.g = c[1];</span><br><span class="line">        colors.b = c[2];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line">function hex_rgb(hex)&#123;</span><br><span class="line">    var r = parseInt(hex[1]+ hex[2],16)/255;</span><br><span class="line">    var g = parseInt(hex[3]+ hex[4],16)/255;</span><br><span class="line">    var b = parseInt(hex[5]+ hex[6],16)/255;</span><br><span class="line">    return [r, g, b];</span><br><span class="line">&#125;</span><br><span class="line">function get_hex(x)&#123;</span><br><span class="line">    var e = parseInt(x*255).toString(16);</span><br><span class="line">    var z = e;</span><br><span class="line">    if (e === 0)&#123;</span><br><span class="line">        z = &apos;00&apos;;</span><br><span class="line">    &#125;</span><br><span class="line">    if (e.length === 1)&#123;</span><br><span class="line">        z = &apos;0&apos;+ e;</span><br><span class="line">    &#125;</span><br><span class="line">    return z;</span><br><span class="line">&#125;</span><br><span class="line">function rgb_hex(r, g, b)&#123;</span><br><span class="line">    var result = &apos;#&apos;+ get_hex(r) + get_hex(g) + get_hex(b);</span><br><span class="line">    return result;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>网页显示：<br><img src="https://img-blog.csdnimg.cn/20190307102634860.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pwMTE1Ng==,size_16,color_FFFFFF,t_70" alt="选择部分修改颜色"><br><img src="https://img-blog.csdnimg.cn/20190307102724289.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3pwMTE1Ng==,size_16,color_FFFFFF,t_70" alt="修改后"><br>本人直男一枚，对于美工方面的确没什么天赋，最后做出来的效果差强人意。原本是准备做成点击车上的部位进而改变颜色，希望有看到鄙人拙作的大佬能指点一二，同时也是对自己过去这段时间的一个总结。</p>
<p>下面分享一些我在学习过程中遇到的问题和一些学习网站：<br>其他类型的3D文件的加载：<br> OBJ:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">var mtlLoader = new THREE.MTLLoader();</span><br><span class="line">mtlLoader.setPath(&apos;exapmle/4/&apos;);</span><br><span class="line">mtlLoader.load(&apos;car.mtl&apos;, function(materials) &#123;</span><br><span class="line">	console.log(materials);</span><br><span class="line">	materials.preload();</span><br><span class="line">	var objLoader = new THREE.OBJLoader();</span><br><span class="line">	objLoader.setMaterials(materials);</span><br><span class="line">	objLoader.setPath(&apos;exapmle/4/&apos;);</span><br><span class="line">	objLoader.load(&apos;car.obj&apos;, function(object) &#123;</span><br><span class="line">		console.log(object, &apos;obj&apos;);</span><br><span class="line">		object.position.y = 0;</span><br><span class="line">		object.rotation.y = 0.5;</span><br><span class="line">		object.scale.set(0.05, 0.05, 0.05);</span><br><span class="line">		console.log(object);</span><br><span class="line">		scene.add(object);</span><br><span class="line">     &#125;, onProgress, onError);</span><br><span class="line"> &#125;);</span><br></pre></td></tr></table></figure></p>
<p>VTK:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">var loader = new THREE.VTKLoader();</span><br><span class="line">loader.addEventListener( &apos;load&apos;, function ( event ) &#123;</span><br><span class="line">	var geometry = event.content;</span><br><span class="line">	var mesh = new THREE.Mesh( geometry, material );</span><br><span class="line">	mesh.position.setY( - 0.09 );</span><br><span class="line">	scene.add( mesh );</span><br><span class="line">	&#125; );</span><br><span class="line">loader.load( &quot;models/vtk/bunny.vtk&quot; );</span><br></pre></td></tr></table></figure>
<p>WebGL中文网  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="http://www.hewebgl.com/" target="_blank" rel="noopener">http://www.hewebgl.com/</a><br>Three.js官方文档&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://threejs.org/" target="_blank" rel="noopener">https://threejs.org/</a><br>3D模型下载  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="https://sketchfab.com" target="_blank" rel="noopener">https://sketchfab.com</a> </p>

        </div>
      </div>
    </div>
  </div>
</article>



    <!-- Footer -->
<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <p class="copyright text-muted">
          Theme By <a target="_blank" href="https://github.com/levblanc">Levblanc.</a>
          Inspired By <a target="_blank" href="https://github.com/klugjo/hexo-theme-clean-blog">Clean Blog.</a>
        <p class="copyright text-muted">
          Powered By <a target="_blank" href="https://hexo.io/">Hexo.</a>
        </p>
      </div>
    </div>
  </div>
</footer>


    <!-- After Footer Scripts -->
<script src="/zp.github.io/js/highlight.pack.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function(event) {
    var codeBlocks = Array.prototype.slice.call(document.getElementsByTagName('pre'))
    codeBlocks.forEach(function(block, index) {
      hljs.highlightBlock(block);
    });
  });
</script>

  </body>
</html>

